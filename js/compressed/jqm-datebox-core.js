(function(e){e.widget("mobile.datebox",{initSelector:"input[data-role='datebox']",options:{version:"3-1.4.5-05",theme:false,themeDefault:"a",themeHeader:"a",themeSetButton:"a",themeCloseButton:false,mode:false,transition:"fade",useAnimation:true,hideInput:false,hideContainer:false,lockInput:true,zindex:"1100",clickEvent:"vclick",clickEventAlt:"click",defaultValue:false,showInitialValue:false,popupPosition:false,popupForceX:false,popupForceY:false,useModal:true,useModalTheme:"b",useInline:false,useInlineBlind:false,useHeader:true,useImmediate:false,useButton:true,buttonIcon:false,buttonIconDate:"calendar",buttonIconTime:"clock",useFocus:false,useClearButton:false,useCollapsedBut:false,usePlaceholder:false,beforeOpenCallback:false,beforeOpenCallbackArgs:[],openCallback:false,openCallbackArgs:[],closeCallback:false,closeCallbackArgs:[],startOffsetYears:false,startOffsetMonths:false,startOffsetDays:false,afterToday:false,beforeToday:false,notToday:false,maxDays:false,minDays:false,maxYear:false,minYear:false,blackDates:false,blackDatesRec:false,blackDays:false,whiteDates:true,minHour:false,maxHour:false,maxDur:false,minDur:false,minuteStep:1,minuteStepRound:0,rolloverMode:{m:true,d:true,h:true,i:true,s:true},useLang:"default",lang:{"default":{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",calTomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:false,isRTL:false,calStartDay:0,clearButton:"Clear",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}}},_enhanceDate:function(){e.extend(this._date.prototype,{copy:function(t,n){t=e.extend([0,0,0,0,0,0,0],t);n=e.extend([0,0,0,0,0,0,0],n);return new Date(n[0]>0?n[0]:this.get(0)+t[0],n[1]>0?n[1]:this.get(1)+t[1],n[2]>0?n[2]:this.get(2)+t[2],n[3]>0?n[3]:this.get(3)+t[3],n[4]>0?n[4]:this.get(4)+t[4],n[5]>0?n[5]:this.get(5)+t[5],n[6]>0?n[5]:this.get(6)+t[6])},adj:function(e,t){if(typeof t!=="number"||typeof e!=="number"){throw new Error("Invalid Arguments")}switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t);break}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t);break}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return false},get12hr:function(){if(this.get(3)===0){return 12}if(this.get(3)<13){return this.get(3)}return this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++){e[t]=this.get(t);if(t===1){e[t]++}if(e[t]<10){e[t]="0"+String(e[t])}}return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++){e[t]=this.get(t)}return e},setFirstDay:function(e){this.setD(2,1).adj(2,e-this.getDay());if(this.get(2)>10){this.adj(2,7)}return this},setDWeek:function(e,t){if(e===4){return this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,(t-1)*7)}return this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,(t-1)*7)},getDWeek:function(e){var t,n;switch(e){case 0:t=this.copy([0,-1*this.getMonth()]).setFirstDay(0);return Math.floor((this.getTime()-(t.getTime()+(this.getTimezoneOffset()-t.getTimezoneOffset())*6e4))/6048e5)+1;case 1:t=this.copy([0,-1*this.getMonth()]).setFirstDay(1);return Math.floor((this.getTime()-(t.getTime()+(this.getTimezoneOffset()-t.getTimezoneOffset())*6e4))/6048e5)+1;case 4:if(this.getMonth()===11&&this.getDate()>28){return 1}t=this.copy([0,-1*this.getMonth()],true).setFirstDay(4).adj(2,-3);n=Math.floor((this.getTime()-(t.getTime()+(this.getTimezoneOffset()-t.getTimezoneOffset())*6e4))/6048e5)+1;if(n<1){t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3);return Math.floor((this.getTime()-t.getTime())/6048e5)+1}return n;default:return 0}}})},_event:function(t,n){var r,i=e(this).data("mobile-datebox");if(!t.isPropagationStopped()){switch(n.method){case"close":i.close();break;case"open":i.open();break;case"set":if(typeof n.value==="object"){i.theDate=n.value;i._t({method:"doset"})}else{e(this).val(n.value);e(this).trigger("change")}break;case"doset":r="_"+i.options.mode+"DoSet";if(e.isFunction(i[r])){i[r].apply(i,[])}else{i._t({method:"set",value:i._formatter(i.__fmt(),i.theDate),date:i.theDate})}break;case"dooffset":if(n.type){i._offset(n.type,n.amount,true)}break;case"dorefresh":i.refresh();break;case"doclear":e(this).val("").trigger("change");break;case"clear":e(this).trigger("change");break}}},_ord:{"default":function(e){var t=e%10;if(e>9&&e<21||t>3){return"th"}return["th","st","nd","rd"][t]}},_dur:function(t){var n=[t/(60*60*1e3*24),t/(60*60*1e3)%24,t/(60*1e3)%60,t/1e3%60];e.each(n,function(e,t){n[e]=parseInt(t,10)});return n},_gridblk:{g:[0,0,"a","b","c","d","e"],b:["a","b","c","d","e","f"]},__:function(e){var t=this.options,n=t.lang[t.useLang],r=t[t.mode+"lang"],i="override"+e.charAt(0).toUpperCase()+e.slice(1);if(typeof t[i]!=="undefined"){return t[i]}if(typeof n[e]!=="undefined"){return n[e]}if(typeof r!=="undefined"&&typeof r[e]!=="undefined"){return r[e]}return t.lang["default"][e]},__fmt:function(){var e=this,t=this.options;if(typeof e.fmtOver!=="undefined"&&e.fmtOver!==false){return e.fmtOver}switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){if(typeof t!=="undefined"&&t==="-"){return String(e)}return(e<10?"0":"")+String(e)},_dRep:function(e,t){var n,r,i=48,s=57,o=1584,u="";if(t===-1){i+=o;s+=o;o=-1584}for(r=0;r<e.length;r++){n=e.charCodeAt(r);if(n>=i&&n<=s){u=u+String.fromCharCode(n+o)}else{u=u+String.fromCharCode(n)}}return u},_doIndic:function(){var t=this;t.d.intHTML.find("*").each(function(){if(e(this).children().length<1){e(this).text(t._dRep(e(this).text()))}else if(e(this).hasClass("ui-datebox-slideday")){e(this).html(t._dRep(e(this).html()))}});t.d.intHTML.find("input").each(function(){e(this).val(t._dRep(e(this).val()))})},_parser:{"default":function(){return false}},_n:function(e,t){return e<0?t:e},_pa:function(e,t){if(typeof t==="boolean"){return new this._date(e[0],e[1],e[2],0,0,0,0)}return new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_makeDate:function(t){var n,r,i,s,o=this,u=this.options,a=this.options.defaultValue,f=o.__fmt(),l=null,c=[],h=new o._date,p={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:false,wtyp:4,wday:false,yday:false,meri:0};t=e.trim(o.__("useArabicIndic")===true?o._dRep(t,-1):t);if(typeof u.mode==="undefined"){return h}if(typeof o._parser[u.mode]!=="undefined"){return o._parser[u.mode].apply(o,[t])}if(u.mode==="durationbox"||u.mode==="durationflipbox"){f=f.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}});f=new RegExp("^"+f+"$");l=f.exec(t);i=f.exec(o.__fmt());if(l===null||l.length!==i.length){if(typeof a==="number"&&a>0){return new o._date((o.initDate.getEpoch()+parseInt(a,10))*1e3)}return new o._date(o.initDate.getTime())}r=o.initDate.getEpoch();for(n=1;n<l.length;n++){s=parseInt(l[n],10);if(i[n].match(/^%Dd$/i)){r=r+s*86400}if(i[n].match(/^%Dl$/i)){r=r+s*3600}if(i[n].match(/^%DM$/i)){r=r+s*60}if(i[n].match(/^%DS$/i)){r=r+s}}return new o._date(r*1e3)}f=f.replace(/%(0|-)*([a-z])/gi,function(e,t,n){c.push(n);switch(n){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+(t==="-"?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:c.pop();return".+?"}});f=new RegExp("^"+f+"$");l=f.exec(t);i=f.exec(o.__fmt());if(l===null||l.length!==i.length){if(a!==false){switch(typeof a){case"object":if(e.isFunction(a.getDay)){h=a}else{if(a.length===3){h=o._pa(a,u.mode.substr(0,4)==="time"?h:false)}}break;case"number":h=new o._date(a*1e3);break;case"string":if(u.mode.substr(0,4)==="time"){r=e.extend([0,0,0],a.split(":")).slice(0,3);h=o._pa(r,h)}else{r=e.extend([0,0,0],a.split("-")).slice(0,3);r[1]--;h=o._pa(r,false)}break}}if(isNaN(h.getDate())){h=new o._date}}else{for(n=1;n<l.length;n++){s=parseInt(l[n],10);switch(c[n-1]){case"s":return new o._date(parseInt(l[n],10)*1e3);case"Y":case"G":p.year=s;break;case"E":p.year=s-543;break;case"y":case"g":if(u.afterToday||s<38){p.year=2e3+s}else{p.year=1900+s}break;case"m":p.mont=s-1;break;case"d":p.date=s;break;case"H":case"k":case"I":case"l":p.hour=s;break;case"M":p.mins=s;break;case"S":p.secs=s;break;case"u":p.wday=s-1;break;case"w":p.wday=s;break;case"j":p.yday=s;break;case"V":p.week=s;p.wtyp=4;break;case"U":p.week=s;p.wtyp=0;break;case"W":p.week=s;p.wtyp=1;break;case"p":case"P":s=new RegExp("^"+l[n]+"$","i");p.meri=s.test(o.__("meridiem")[0])?-1:1;break;case"b":r=e.inArray(l[n],o.__("monthsOfYearShort"));if(r>-1){p.mont=r}break;case"B":r=e.inArray(l[n],o.__("monthsOfYear"));if(r>-1){p.mont=r}break}}if(p.meri!==0){if(p.meri===-1&&p.hour===12){p.hour=0}if(p.meri===1&&p.hour!==12){p.hour=p.hour+12}}h=new o._date(o._n(p.year,0),o._n(p.mont,0),o._n(p.date,1),o._n(p.hour,0),o._n(p.mins,0),o._n(p.secs,0),0);if(p.year<100&&p.year!==-1){h.setFullYear(p.year)}if(p.mont>-1&&p.date>-1||p.hour>-1&&p.mins>-1&&p.secs>-1){return h}if(p.week!==false){h.setDWeek(p.wtyp,p.week);if(p.date>-1){h.setDate(p.date)}}if(p.yday!==false){h.setD(1,0).setD(2,1).adj(2,p.yday-1)}if(p.wday!==false){h.adj(2,p.wday-h.getDay())}}return h},_customformat:{"default":function(){return false}},_formatter:function(e,t){var n=this,r=this.options,i,s=0;if(r.mode.substr(0,4)==="dura"){s=n._dur(this.theDate.getTime()-this.initDate.getTime());if(!e.match(/%Dd/)){s[1]+=s[0]*24}if(!e.match(/%Dl/)){s[2]+=s[1]*60}if(!e.match(/%DM/)){s[3]+=s[2]*60}}e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,u,a){if(u==="X"){if(typeof n._customformat[r.mode]!=="undefined"){return n._customformat[r.mode](a,t,r)}return e}if(u==="D"){switch(a){case"d":return s[0];case"l":return n._zPad(s[1]);case"M":return n._zPad(s[2]);case"S":return n._zPad(s[3]);case"A":return n.__("durationDays")[s[0]===1?0:1];default:return e}}switch(a){case"a":return n.__("daysOfWeekShort")[t.getDay()];case"A":return n.__("daysOfWeek")[t.getDay()];case"b":return n.__("monthsOfYearShort")[t.getMonth()];case"B":return n.__("monthsOfYear")[t.getMonth()];case"C":return parseInt(t.getFullYear()/100);case"d":return n._zPad(t.getDate(),u);case"H":case"k":return n._zPad(t.getHours(),u);case"I":case"l":return n._zPad(t.get12hr(),u);case"m":return n._zPad(t.getMonth()+1,u);case"M":return n._zPad(t.getMinutes(),u);case"p":case"P":i=n.__("meridiem")[t.get(3)<12?0:1].toUpperCase();return a==="P"?i.toLowerCase():i;case"s":return t.getEpoch();case"S":return n._zPad(t.getSeconds(),u);case"u":return n._zPad(t.getDay()+1,u);case"w":return t.getDay();case"y":return n._zPad(t.getFullYear()%100);case"Y":return t.getFullYear();case"E":return t.getFullYear()+543;case"V":return n._zPad(t.getDWeek(4),u);case"U":return n._zPad(t.getDWeek(0),u);case"W":return n._zPad(t.getDWeek(1),u);case"o":if(typeof n._ord[r.useLang]!=="undefined"){return n._ord[r.useLang](t.getDate())}return n._ord["default"](t.getDate());case"j":i=new Date(t.getFullYear(),0,1);i="000"+String(Math.ceil((t-i)/864e5)+1);return i.slice(-3);case"G":i=t.getFullYear();if(t.getDWeek(4)===1&&t.getMonth()>0){return i+1}if(t.getDWeek(4)>51&&t.getMonth()<11){return i-1}return i;case"g":i=t.getFullYear%100;if(t.getDWeek(4)===1&&t.getMonth()>0){++i}if(t.getDWeek(4)>51&&t.getMonth()<11){--i}return n._zpad(i);default:return e}});if(n.__("useArabicIndic")===true){e=n._dRep(e)}return e},_btwn:function(e,t,n){return e>t&&e<n},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,n=this.options.minStepRound,r=e%t;if(t>1&&r>0){if(n<0){e=e-r}else if(n>0){e=e+(t-r)}else{if(e%t<t/2){e=e-r}else{e=e+(t-r)}}this.theDate.setMinutes(e)}},_offset:function(t,n,r){var i=this,s=this.options,o=this.theDate,u=false;t=(t||"").toLowerCase();if(typeof r==="undefined"){r=true}if(t!=="a"&&(typeof s.rolloverMode[t]==="undefined"||s.rolloverMode[t]===true)){u=e.inArray(t,["y","m","d","h","i","s"])}else{switch(t){case"y":u=0;break;case"m":if(i._btwn(o.get(1)+n,-1,12)){u=1}break;case"d":if(i._btwn(o.get(2)+n,0,32-o.copy([0],[0,0,32,13]).get(3)+1)){u=2}break;case"h":if(i._btwn(o.get(3)+n,-1,24)){u=3}break;case"i":if(i._btwn(o.get(4)+n,-1,60)){u=4}break;case"s":if(i._btwn(o.get(5)+n,-1,60)){u=5}break;case"a":i._offset("h",(n>0?1:-1)*12,false);break}}if(u!==false){i.theDate.adj(u,n)}if(r===true){i.refresh()}if(s.useImmediate){i._t({method:"doset"})}if(i.calBackDate!==false){i._t({method:"displayChange",selectedDate:i.calBackDate,shownDate:i.theDate,thisChange:t,thisChangeAmount:n})}i._t({method:"offset",type:t,amount:n,newDate:i.theDate})},_startOffset:function(e){var t=this.options;if(t.startOffsetYears!==false){e.adj(0,t.startOffsetYears)}if(t.startOffsetMonths!==false){e.adj(1,t.startOffsetMonths)}if(t.startOffsetDays!==false){e.adj(2,t.startOffsetDays)}return e},_destroy:function(){var t=this,n=this.options,r=this.d.wrap.find("a");t.d.wrap.removeClass("ui-input-has-clear");r.remove();if(n.lockInput){t.d.input.removeAttr("readonly")}t.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox");e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA)},_create:function(){e(document).trigger("dateboxcreate");var t=this,n=e.extend(this.options,this._getLongOptions(this.element),this.element.data("options")),r=n.theme===false?e.mobile.getInheritedTheme(this.element):n.theme,i=n.useAnimation?n.transition:"none",s={input:this.element,wrap:this.element.parent(),mainWrap:e("<div>",{"class":"ui-datebox-container ui-overlay-shadow "+"ui-corner-all ui-datebox-hidden "+i+" ui-body-"+r}).css("zIndex",n.zindex),intHTML:false},o=".datebox"+this.uuid,u=typeof window.ontouchstart!=="undefined",a={eStart:(u?"touchstart":"mousedown")+o,eMove:(u?"touchmove":"mousemove")+o,eEnd:(u?"touchend":"mouseup")+o,eEndA:u?["mouseup","touchend","touchcanel","touchmove"].join(o+" ")+o:"mouseup"+o,move:false,start:false,end:false,pos:false,target:false,delta:false,tmp:false};e.extend(t,{d:s,drag:a,touch:u});if(n.usePlaceholder!==false){if(n.usePlaceholder===true&&t._grabLabel()!==""){t.d.input.attr("placeholder",t._grabLabel())}if(typeof n.usePlaceholder==="string"){t.d.input.attr("placeholder",n.usePlaceholder)}}n.theme=r;t.calBackDate=false;t.calDateVisible=true;t.disabled=false;t.runButton=false;t._date=window.Date;t._enhanceDate();t.baseID=t.d.input.attr("id");t.initDate=new t._date;t.initDate.setMilliseconds(0);t.theDate=n.defaultValue?t._makeDate():t.d.input.val()!==""?t._makeDate(t.d.input.val()):new t._date;if(t.d.input.val()===""){t._startOffset(t.theDate)}t.initDone=false;if(n.showInitialValue){t.d.input.val(t._formatter(t.__fmt(),t.theDate))}if(n.useButton){if(n.mode!==false){t.d.wrap.addClass("ui-input-has-clear");if(n.buttonIcon===false){if(n.mode.substr(0,4)==="time"||n.mode.substr(0,3)==="dur"){n.buttonIcon=n.buttonIconTime}else{n.buttonIcon=n.buttonIconDate}}e("<a href='#' class='ui-input-clear ui-btn ui-icon-"+n.buttonIcon+" ui-btn-icon-notext ui-corner-all'></a>").attr("title",t.__("tooltip")).text(t.__("tooltip")).appendTo(t.d.wrap).on(n.clickEvent,function(e){e.preventDefault();if(n.useFocus){t.d.input.focus()}else{if(!t.disabled){t._t({method:"open"})}}})}}if(n.hideInput){t.d.wrap.hide()}if(n.hideContainer){t.d.wrap.parent().hide()}t.d.input.on("focus.datebox",function(){t.d.input.addClass("ui-focus");if(t.disabled===false&&n.useFocus){t._t({method:"open"})}}).on("blur.datebox",function(){t.d.input.removeClass("ui-focus")}).on("change.datebox",function(){t.theDate=t._makeDate(t.d.input.val());t.refresh()}).on("datebox",t._event);if(n.lockInput){t.d.input.attr("readonly","readonly")}if(typeof e.event.special.mousewheel!=="undefined"){t.wheelExists=true}if(t.d.input.is(":disabled")){t.disable()}t.applyMinMax(false,false);if(n.useInline||n.useInlineBlind){t.open()}e(document).trigger("dateboxaftercreate")},applyMinMax:function(e,t){var n,r,i,s,o=this,u=this.options,a=new this._date,f=24*60*60*1e3;n=o._pa([0,0,0],a);if(typeof e==="undefined"){e=true}if(typeof t==="undefined"){t=true}if((t===true||u.minDays===false)&&typeof o.d.input.attr("min")!=="undefined"){r=o.d.input.attr("min").split("-");i=new o._date(r[0],r[1]-1,r[2],0,0,0,0);s=(i.getTime()-n.getTime())/f;u.minDays=parseInt(s*-1,10)+0}if((t===true||u.maxDays===false)&&typeof o.d.input.attr("max")!=="undefined"){r=o.d.input.attr("max").split("-");i=new o._date(r[0],r[1]-1,r[2],0,0,0,0);s=(i.getTime()-n.getTime())/f;u.maxDays=parseInt(s,10)-1}if(e===true){o._t({method:"refresh"})}},_build:{"default":function(){this.d.headerText="Error";if(this.d.intHTML!==false){this.d.intHTML.remove().empty()}this.d.intHTML=e("<div class='ui-body-b'><h2 style='text-align:center'>"+"Unknown Mode</h2></div>")}},_drag:{"default":function(){return false}},open:function(){var t=this,n=this.options,r={transition:n.useAnimation?n.transition:"none"},i={history:false,transition:n.useAnimation?n.transition:"none"};if(n.useFocus&&t.fastReopen===true){t.d.input.blur();return false}t.theDate=t._makeDate(t.d.input.val());t.calBackDate=false;if(t.d.input.val()===""){t._startOffset(t.theDate)}t.d.input.blur();if(typeof t._build[n.mode]==="undefined"){t._build["default"].apply(t,[])}else{t._build[n.mode].apply(t,[])}if(typeof t._drag[n.mode]!=="undefined"){t._drag[n.mode].apply(t,[])}t._t({method:"refresh"});if(t.__("useArabicIndic")===true){t._doIndic()}if((n.useInline||n.useInlineBlind)&&t.initDone===false){t.d.mainWrap.append(t.d.intHTML);if(n.hideContainer){if(n.useHeader){t.d.mainWrap.prepend(e("<div class='ui-header ui-bar-"+n.themeHeader+"'>"+"<h1 class='ui-title'>"+t.d.headerText+"</h1>"+"</div>"))}t.d.wrap.parent().after(t.d.mainWrap)}else{t.d.wrap.parent().append(t.d.mainWrap)}t.d.mainWrap.removeClass("ui-datebox-hidden ui-overlay-shadow");if(n.useInline){t.d.mainWrap.addClass("ui-datebox-inline").css("zIndex","auto");if(!n.hideInput&&!n.hideContainer){t.d.mainWrap.addClass("ui-datebox-inline-has-input")}setTimeout(function(e){return function(){e._t({method:"postrefresh"})}}(t),100);return true}else{t.d.mainWrap.addClass("ui-datebox-inline ui-datebox-inline-has-input").css("zIndex","auto");t.d.mainWrap.hide()}t.initDone=false;t._t({method:"postrefresh"})}if(n.useInlineBlind){if(t.initDone){t.refresh();t.d.mainWrap.slideDown();t._t({method:"postrefresh"})}else{t.initDone=true}return true}if(t.d.intHTML.is(":visible")){return false}t.d.mainWrap.empty();if(n.useHeader){t.d.mainWrap.append(e("<a href='#'>Close</a>").addClass("ui-btn-left ui-link ui-btn ui-btn-"+(n.themeCloseButton===false?n.themeHeader:n.themeCloseButton)+" ui-icon-delete "+"ui-btn-icon-notext ui-shadow ui-corner-all").on(n.clickEventAlt,function(e){e.preventDefault();t._t({method:"close"})}));t.d.mainWrap.append(e("<div class='ui-header ui-bar-"+n.themeHeader+"'>"+"<h1 class='ui-title'>"+t.d.headerText+"</h1>"+"</div>"))}t.d.mainWrap.append(t.d.intHTML).css("zIndex",n.zindex);t._t({method:"postrefresh"});if(n.popupPosition!==false){r.positionTo=n.popupPosition}else{if(typeof t.baseID!=="undefined"){r.positionTo="#"+t.baseID}else{r.positionTo="window"}}if(n.popupForceX!==false&&n.popupForceY!==false){r.x=parseInt(n.popupForceX,10);r.y=parseInt(n.popupForceY,10);r.positionTo="origin"}if(n.useModal){i.overlayTheme=n.useModalTheme;i.dismissible=false}if(n.openCallback!==false){if(!e.isFunction(n.openCallback)){if(typeof window[n.openCallback]==="function"){n.openCallback=window[n.openCallback]}}i.afteropen=function(){t._t({method:"postrefresh"});if(n.openCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],n.openCallbackArgs))===false){t._t({method:"close"})}}}else{i.afteropen=function(){t._t({method:"postrefresh"})}}if(n.closeCallback!==false){if(!e.isFunction(n.closeCallback)){if(typeof window[n.closeCallback]==="function"){n.closeCallback=window[n.closeCallback]}}i.afterclose=function(){n.closeCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],n.closeCallbackArgs))}}if(n.beforeOpenCallback!==false){if(!e.isFunction(n.beforeOpenCallback)){if(typeof window[n.beforeOpenCallback]==="function"){n.beforeOpenCallback=window[n.beforeOpenCallback]}}if(n.beforeOpenCallback.apply(t,e.merge([{custom:t.customCurrent,initDate:t.initDate,date:t.theDate,duration:t.lastDuration}],n.beforeOpenCallbackArgs))===false){return false}}t.d.mainWrap.removeClass("ui-datebox-hidden").popup(i).popup("open",r)},close:function(){var t=this,n=this.options;t.calBackDate=false;if(n.useInlineBlind){t.d.mainWrap.slideUp();return true}if(n.useInline||t.d.intHTML===false){return true}t.d.mainWrap.popup("close");e(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA);if(n.useFocus){t.fastReopen=true;setTimeout(function(e){return function(){e.fastReopen=false}}(t),300)}},refresh:function(){var e=this,t=this.options;if(typeof e._build[t.mode]==="undefined"){e._build["default"].apply(e,[])}else{e._build[t.mode].apply(e,[])}if(e.__("useArabicIndic")===true){e._doIndic()}e.d.mainWrap.append(e.d.intHTML);e._t({method:"postrefresh"})},_check:function(){var t,n,r,i,s,o=this,u=this.options,a=this.theDate;o.dateOK=true;if(typeof u.mode==="undefined"){return true}if(u.afterToday){t=new o._date;if(a<t){a=t}}if(u.beforeToday){t=new o._date;if(a>t){a=t}}if(u.maxDays!==false){t=new o._date;t.adj(2,u.maxDays);if(a>t){a=t}}if(u.minDays!==false){t=new o._date;t.adj(2,-1*u.minDays);if(a<t){a=t}}if(u.minHour!==false){if(a.get(3)<u.minHour){a.setD(3,u.minHour)}}if(u.maxHour!==false){if(a.get(3)>u.maxHour){a.setD(3,u.maxHour)}}if(u.maxYear!==false){t=new o._date(u.maxYear,11,31);if(a>t){a=t}}if(u.minYear!==false){t=new o._date(u.minYear,0,1);if(a<t){a=t}}if(u.mode.substr(0,4)==="time"||u.mode.substr(0,3)==="dur"){if(u.mode==="timeflipbox"&&u.validHours!==false){if(e.inArray(a.get(3),u.validHours)<0){o.dateOK=false}}}else{if(u.blackDatesRec!==false){n=a.get(0);r=a.get(1);i=a.get(2);for(s=0;s<u.blackDatesRec.length;s++){if((u.blackDatesRec[s][0]===-1||u.blackDatesRec[s][0]===n)&&(u.blackDatesRec[s][1]===-1||u.blackDatesRec[s][1]===r)&&(u.blackDatesRec[s][2]===-1||u.blackDatesRec[s][2]===i)){o.dateOK=false}}}if(u.blackDates!==false){if(e.inArray(a.iso(),u.blackDates)>-1){o.dateOK=false}}if(u.blackDays!==false){if(e.inArray(a.getDay(),u.blackDays)>-1){o.dateOK=false}}if(u.whiteDates!==false){if(e.inArray(a.iso(),u.whiteDates)>-1){o.dateOK=true}}}o.theDate=a},_grabLabel:function(){var t,n,r=this,i=this.options,s=false;if(typeof i.overrideDialogLabel==="undefined"){t=r.d.input.attr("placeholder");n=r.d.input.attr("title");if(typeof t!=="undefined"){return t}if(typeof n!=="undefined"){return n}s=e(document).find("label[for='"+r.d.input.attr("id")+"']").text();return s===""?false:s}return i.overrideDialogLabel},_stdBtn:{clear:function(){var t=this,n=this.options;return e("<a href='#' role='button'>"+t.__("clearButton")+"</a>").addClass("ui-btn ui-btn-"+n.theme+" ui-icon-delete ui-btn-icon-left ui-shadow ui-corner-all").on(n.clickEventAlt,function(e){e.preventDefault();t.d.input.val("");t._t({method:"clear"});t._t({method:"close"})})},close:function(t){var n=this,r=this.options;return e("<a href='#' role='button'>"+t+"</a>").addClass("ui-btn ui-btn-"+r.themeSetButton+" ui-icon-check ui-btn-icon-left ui-shadow ui-corner-all"+(n.dateOK===true?"":" ui-state-disabled")).on(r.clickEventAlt,function(e){e.preventDefault();if(n.dateOK===true){n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate});n._t({method:"close"})}})}},_makeEl:function(e,t){var n=false,r=false;r=e.clone();if(typeof t.attr!=="undefined"){for(n in t.attr){if(t.attr.hasOwnProperty(n)){r.data(n,t.attr[n])}}}return r},_getLongOptions:function(e){var t,n,r={},i="datebox",s=7;for(t in e.data()){if(t.substr(0,s)===i&&t.length>s){n=t.substr(s);n=n.charAt(0).toLowerCase()+n.slice(1);if(n!=="options"){r[n]=e.data(t)}}}return r},disable:function(){var e=this;e.d.input.attr("disabled",true);e.d.wrap.addClass("ui-state-disabled").blur();e.disabled=true;e.d.mainWrap.addClass("ui-state-disabled");e._t({method:"disable"})},enable:function(){var e=this;e.d.input.attr("disabled",false);e.d.wrap.removeClass("ui-state-disabled");e.disabled=false;e.d.mainWrap.removeClass("ui-state-disabled");e._t({method:"enable"})},_setOption:function(){e.Widget.prototype._setOption.apply(this,arguments);this.refresh()},getTheDate:function(){if(this.calBackDate!==false){return this.calBackDate}return this.theDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return this.calDateVisible},setTheDate:function(e){if(typeof e==="object"){this.theDate=e}else{this.theDate=this._makeDate(e)}this.refresh();this._t({method:"doset"})},parseDate:function(e,t){var n,r=this;r.fmtOver=e;n=r._makeDate(t);r.fmtOver=false;return n},callFormat:function(e,t){return this._formatter(e,t)},getOption:function(e){var t=this.__(e);if(typeof t!=="undefined"){return t}else{return this.options[e]}},_t:function(e){this.d.input.trigger("datebox",e)}})})(jQuery)
